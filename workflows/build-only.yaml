name: "Build OpenDataHub Operator (Extended)"
description: "Build the OpenDataHub operator image with additional status checks"

# Include the main build workflow
includes:
  - "build"

# Variables are automatically loaded from config.yaml
# You can override specific values here if needed:
# variables:
#   REGISTRY_TAG: "custom-tag"

steps:
  - name: "Check repository status"
    type: "tool"
    command: "forks-status --dirty"
    
  - name: "Build manifests from local checkouts"
    type: "shell"
    command: "make get-manifests-local-branch"
    working_directory: "${LOCAL_CHECKOUTS_DIR}/opendatahub-operator"
    env:
      FORK_ORG: "${FORK_ORG}"
      BRANCH_NAME: "${BRANCH_NAME}"
      LOCAL_MODE: "true"
      LOCAL_CHECKOUTS_DIR: "${LOCAL_CHECKOUTS_DIR}"
    
  - name: "Show build results"
    type: "shell"
    command: "echo 'Build completed successfully!'" 